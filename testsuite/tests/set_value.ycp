// Sysconfig module - testsuite
//
// set_value() tests
//
// testedfiles: Sysconfig.ycp
//
// $Id$
//

{

import "Testsuite";
import "Pkg";   // override packamanager
import "Sysconfig";

Testsuite::Dump("Testing data type validation");

// initialize variable
Testsuite::Test( ``(Sysconfig::Set([ $[ "sysconfig_key" : "VARIABLE",
    "sysconfig_path" : "/etc/sysconfig/test",
    "sysconfig_value" : "yes" ] ]) ), [ $[], $[], $[] ], nil );

// variable with metadata
map READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: yesno\n# Comment with metadata" ]]
			    ]
];

Testsuite::Dump("Test yesno type");
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "no", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "yes", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "yesno", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Test( ``(Sysconfig::get_description("VARIABLE$/etc/sysconfig/test") ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test boolean type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: boolean\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "true", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "false", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "234", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test integer type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0234x", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "x0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "02-34", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test integer(0:100) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer(0:100)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "12", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "100", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-1", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "101", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-2301", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test integer(-10:10) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer(-10:10)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test integer(0:) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer(0:)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test integer(-10:) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer(-10:)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test integer(10:) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: integer(10:)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test string type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: string\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test string(0,10) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: string(0,10)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test list(0,10) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: list(0,10)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "5", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-11", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2123", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "ewre", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "3.1415927", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test list(\"a, bc\",a,b,,c,\\\") type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: list(\"a, bc\",a,b,,c,\\\")\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "a", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "a,b,", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "a, bc", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "\"a, bc\"", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "\"", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "11", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test ip type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: ip\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10.20.30.40", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "234.234234.234.23", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "::1", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2001:780:101:1400:230:84ff:fe0e:2376", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test ip4 type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: ip4\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10.20.30.40", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "234.234234.234.23", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "::1", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2001:780:101:1400:230:84ff:fe0e:2376", false, false) ), [ READ, $[], $[] ], nil );

Testsuite::Dump("Test ip6 type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: ip6\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "-10", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10.20.30.40", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "234.234234.234.23", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "::1", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "2001:780:101:1400:230:84ff:fe0e:2376", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test regexp(abc) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: regexp(abc)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "abc", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "10abcasd20", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "abcabc", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "abbc", false, false) ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Test regexp(^0[0-7]*$) type");
READ = $[ "syseditor" : $[ "value" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "yes" ]],
			       "value_comment" : $[ "/etc/sysconfig/test" : $[ "VARIABLE" : "## Type: regexp(^0[0-7]*$)\n# Comment with metadata" ]]
			    ]
];
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "02", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "023", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0897", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "vxb003", false, false) ), [ READ, $[], $[] ], nil );



Testsuite::Dump("Testing value setting");

// get current value (should be 023 frou previous tests)
Testsuite::Test( ``(Sysconfig::get_description("VARIABLE$/etc/sysconfig/test") ), [ READ, $[], $[] ], nil );
// force wrong value
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0897", true, false) ), [ READ, $[], $[] ], nil );
// get current value
Testsuite::Test( ``(Sysconfig::get_description("VARIABLE$/etc/sysconfig/test") ), [ READ, $[], $[] ], nil );


Testsuite::Dump("Testing list of changed values");

// set original value => no change
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "yes", true, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::Modified() ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::get_modified() ), [ READ, $[], $[] ], nil );

// set new value
Testsuite::Test( ``(Sysconfig::set_value("VARIABLE$/etc/sysconfig/test", "0777", false, false) ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::Modified() ), [ READ, $[], $[] ], nil );
Testsuite::Test( ``(Sysconfig::get_modified() ), [ READ, $[], $[] ], nil );

}

